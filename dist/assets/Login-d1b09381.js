import{r as g,d as w,j as A,L as V,bg as F,F as s,N as t,bj as b,bh as x,u as N,bi as P,M as S,be as k,bl as $}from"./vuetify-7130618d.js";import{_ as T,u as B,a as O,b as I,V as R,c as z,d as Z,e as D,f as M,g as L,h as U,i as G,j as C,k as H,l as J,m as K,n as q}from"./index-9f2fee20.js";const j={required:r=>Array.isArray(r)?r.length>0:typeof r=="string"?r.trim().length>0:r!=null,email:r=>r?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i.test(r):!0,numeric:r=>r?!isNaN(parseFloat(r))&&isFinite(r):!0,minLength:(r,u)=>r?String(r).length>=u:!0,maxLength:(r,u)=>r?String(r).length<=u:!0},Q=(r,u)=>{const l={};return Object.keys(u).forEach(o=>{const h=u[o],m=r[o];h.forEach(d=>{if(typeof d=="string")j[d](m)||(l[o]=l[o]||[],l[o].push(`Field fails ${d} validation`));else if(typeof d=="object"){const[n,...c]=d;j[n](m,...c)||(l[o]=l[o]||[],l[o].push(`Field fails ${n} validation`))}})}),Object.keys(l).length>0?l:null};const W={class:"login-page"},X={class:"login-header"},Y={class:"d-flex flex-column align-center pt-8 pb-6"},ee={class:"text-h4 font-weight-bold mb-1 text-primary"},re={__name:"Login",setup(r){const u=B(),l=O(),o=I(),h=g(null),m=g(!1),d=g(!1),n=g(null),c=w({email:null,password:null}),E="CorePOS",i=w({email:"",password:""}),f={required:a=>!!a||"This field is required",email:a=>/.+@.+\..+/.test(a)||"Please enter a valid email",minLength:a=>a.length>=6||"Password must be at least 6 characters"},v=A(()=>i.email&&i.password&&!c.email&&!c.password);function y(a){c[a]=null,n.value=null}async function _(){if(!v.value)return;const a=Q(i,{email:["required","email"],password:["required",["minLength",6]]});if(a){Object.assign(c,a);return}d.value=!0,n.value=null;try{await o.login({email:i.email,password:i.password}),q.info("Login successful",{email:i.email});const e=l.query.redirect||"/pos";u.push(e)}catch(e){q.error("Login failed",e),e.details?(Object.assign(c,e.details),n.value="Please correct the errors below"):n.value=e.message||"Login failed. Please try again."}finally{d.value=!1}}return(a,e)=>(V(),F("div",W,[s(R,{fluid:"",class:"fill-height pa-0"},{default:t(()=>[s(z,{align:"center",justify:"center","no-gutters":"",class:"fill-height"},{default:t(()=>[s(Z,{cols:"12",sm:"8",md:"6",lg:"4",xl:"3",class:"pa-4"},{default:t(()=>[s(D,{class:"login-card",elevation:"2",rounded:"lg"},{default:t(()=>[b("div",X,[b("div",Y,[s(M,{color:"primary",size:"64",class:"mb-6"},{default:t(()=>[s(L,{icon:"mdi-store",size:"32",color:"white"})]),_:1}),b("h1",ee,x(N(E)),1),e[6]||(e[6]=b("p",{class:"text-subtitle-1 text-primary"}," Sign in to your account ",-1))])]),s(U,{class:"px-6 pt-8 pb-4"},{default:t(()=>[s(G,{onSubmit:P(_,["prevent"]),ref_key:"form",ref:h},{default:t(()=>[s(C,{modelValue:i.email,"onUpdate:modelValue":[e[0]||(e[0]=p=>i.email=p),e[1]||(e[1]=p=>y("email"))],rules:[f.required,f.email],label:"Email","prepend-inner-icon":"mdi-email",variant:"outlined","error-messages":c.email,required:"",autocomplete:"username",class:"mb-4 login-field",placeholder:"Enter your email","bg-color":"surface"},null,8,["modelValue","rules","error-messages"]),s(C,{modelValue:i.password,"onUpdate:modelValue":[e[2]||(e[2]=p=>i.password=p),e[4]||(e[4]=p=>y("password"))],rules:[f.required,f.minLength],label:"Password","prepend-inner-icon":"mdi-lock","append-inner-icon":m.value?"mdi-eye":"mdi-eye-off","onClick:appendInner":e[3]||(e[3]=p=>m.value=!m.value),type:m.value?"text":"password",variant:"outlined","error-messages":c.password,required:"",autocomplete:"current-password",class:"mb-4 login-field",placeholder:"Enter your password","bg-color":"surface"},null,8,["modelValue","rules","append-inner-icon","type","error-messages"]),s(H,null,{default:t(()=>[n.value?(V(),S(J,{key:0,type:"error",variant:"tonal",class:"mb-4",closable:"",density:"compact","onClick:close":e[5]||(e[5]=p=>n.value=null)},{prepend:t(()=>[s(L,{icon:"mdi-alert-circle"})]),default:t(()=>[k(" "+x(n.value),1)]),_:1})):$("",!0)]),_:1}),s(K,{color:"primary",loading:d.value,disabled:!v.value,onClick:_,size:"large",block:"","min-height":"48",class:"mt-2"},{default:t(()=>e[7]||(e[7]=[k(" Continue ")])),_:1},8,["loading","disabled"])]),_:1},512)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]))}},te=T(re,[["__scopeId","data-v-342bb03e"]]);export{te as default};
//# sourceMappingURL=Login-d1b09381.js.map
